<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Statistiky hráčů</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #ffd700;
      margin-bottom: 10px;
    }

    #controls {
      text-align: center;
      margin-bottom: 20px;
    }

    select {
      background-color: #2c2c3c;
      color: #fff;
      padding: 5px 10px;
      border: 1px solid #555;
      border-radius: 5px;
      font-size: 14px;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .player-card {
      background-color: #2c2c3c;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
      text-align: center;
      transition: transform 0.2s;
    }

    .player-card:hover {
      transform: translateY(-3px);
    }

    .team-logo {
      width: 48px;
      height: 48px;
      margin-bottom: 8px;
    }

    .player-name {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 6px;
      color: #ffffff;
    }

    .player-info {
      font-size: 13px;
      color: #aaaaaa;
      margin: 4px 0;
    }

    .highlight {
      color: #ffd700;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Statistiky hráčů</h1>
  <div id="controls">
    <label for="sortSelect">Řadit podle:</label>
    <select id="sortSelect">
      <option value="KDA">KDA</option>
      <option value="MVP">MVP</option>
      <option value="Kills">Kills</option>
      <option value="Tým">Tým</option>
      <option value="Role">Pozice (Role)</option>
    </select>
  </div>

  <div id="grid">Načítám data...</div>

  <script>
    const csvData = `
;Player;Kills;Deaths;Assists;KDA;Počet Her;MVP;Role;Tým
44;ERNIE;99;58;82;3,1;14;5;ADC;Pandas
38;SAJOX;77;63;122;3,2;17;0;MID;Monitors
43;PILOT;74;51;92;3,3;14;0;MID;Pandas
39;PREDATOR;72;30;59;4,4;10;2;ADC;Monitors
64;SIMBA;66;41;67;3,2;10;0;ADC;Capybara
3;ZEN;65;16;56;7,6;7;1;MID;Aligators
34;447;63;32;66;4,0;10;0;ADC;Bears
52;SGOOB;63;42;51;2,7;9;3;JNG;Parrots
62;MORPHED;61;43;101;3,8;10;0;JNG;Capybara
58;MABE;59;42;76;3,2;9;0;MID;Iguana
37;WINNIK;57;60;168;3,8;17;4;JNG;Monitors
47;KESSIG;56;36;74;3,6;9;0;JNG;Whales
74;STOMCI;55;27;67;4,5;7;1;ADC;Snakes
63;XERUTH;55;31;62;3,8;8;2;MID;Capybara
36;ALTEIAN;55;94;71;1,3;17;0;TOP;Monitors
18;PISLOU;53;19;46;5,2;7;1;MID;Tigers
14;WODR;52;26;55;4,1;7;1;ADC;Kangaroo
31;LAGIER;51;29;56;3,7;9;2;TOP;Bears
2;KRYSTOF;50;19;77;6,7;7;1;JNG;Aligators
33;DABLIK;50;36;90;3,9;10;3;MID;Bears
24;BRTA;49;31;63;3,6;10;1;ADC;Wolves
49;UNSHEAD;46;31;76;3,9;9;2;ADC;Whales
21;BLAZE;44;23;36;3,5;10;1;TOP;Wolves
27;MICHAL;44;34;40;2,5;7;1;JNG;Flamingo
66;SOVAZ;44;40;39;2,1;9;2;TOP;Cheetahs
7;MIRACLE;42;21;67;5,2;7;2;JNG;Lions
17;DAO;42;33;63;3,2;7;0;JNG;Tigers
9;ASTRO;42;32;50;2,9;7;0;ADC;Lions
56;BUZZ;41;35;60;2,9;9;0;TOP;Iguana
48;MORDECAAY;41;49;84;2,6;9;1;MID;Whales
22;TOOFAST;40;31;84;4,0;10;3;JNG;Wolves
13;PANDA;39;23;55;4,1;7;3;MID;Kangaroo
19;VAJTAKK;39;32;50;2,8;7;0;ADC;Tigers
59;ECLIPSE;38;28;53;3,3;7;0;ADC;Iguana
29;LENNY;38;22;33;3,2;7;0;ADC;Flamingo
46;MATO;38;31;61;3,2;9;1;TOP;Whales
53;WENDSD;37;35;37;2,1;9;0;MID;Parrots
42;HAJNEJ;37;65;91;2,0;11;0;JNG;Pandas
23;NUGY;36;32;73;3,4;10;0;MID;Wolves
73;LOVECOURY;35;27;71;3,9;6;0;MID;Snakes
68;AMITH;35;45;57;2,0;9;0;MID;Cheetahs
12;ARASHID;32;28;74;3,8;7;0;JNG;Kangaroo
67;MOREALL;32;45;79;2,5;9;0;JNG;Cheetahs
4;VALIS;31;18;73;5,8;7;1;ADC;Aligators
72;RADEK;31;35;98;3,7;7;0;JNG;Snakes
69;RAIIDEN;31;26;57;3,4;9;0;ADC;Cheetahs
11;ALKO;30;12;18;4,0;7;1;TOP;Kangaroo
41;GABEQ;30;56;99;2,3;14;1;TOP;Pandas
77;SKENK;30;56;34;1,1;7;0;JNG;Sharks
8;POSTOLKA;29;21;30;2,8;5;3;MID;Lions
95;APM;28;9;17;5,0;2;1;SUB;
1;POLI;26;9;40;7,3;6;1;TOP;Aligators
32;HOUBA;26;32;117;4,5;10;0;JNG;Bears
54;CLER;25;38;54;2,1;9;0;ADC;Parrots
26;LADIK;24;27;41;2,4;7;1;TOP;Flamingo
28;ASMO;24;31;47;2,3;7;1;MID;Flamingo
78;KUBIK;24;43;38;1,4;7;1;MID;Sharks
5;LAMA;22;16;105;7,9;7;3;SUP;Aligators
60;DREAMERR;21;43;112;3,1;8;0;SUP;Iguana
79;RESTRICTED;21;40;22;1,1;6;0;ADC;Sharks
40;DEDA;20;76;210;3,0;17;3;SUP;Monitors
75;JENIKK;20;45;111;2,9;7;0;SUP;Snakes
71;BUCKO;19;11;24;3,9;3;0;TOP;Snakes
93;TRESKO;19;11;12;2,8;2;0;SUB;
6;DARK;19;27;38;2,1;7;0;TOP;Lions
98;ERNIEDEATH;17;9;6;2,6;3;0;SUB;
76;POPO;17;46;19;0,8;7;0;TOP;Sharks
61;XPEPE;15;41;57;1,8;9;1;TOP;Capybara
96;ROMOND;14;4;15;7,3;2;0;SUB;
16;MARMELADA;14;22;34;2,2;6;1;TOP;Tigers
97;8PEK;13;2;9;11,0;1;1;SUB;
10;ERKO;13;29;102;4,0;7;0;SUP;Lions
57;ONIFUS;13;57;94;1,9;9;3;JNG;Iguana
15;TEE;12;21;100;5,3;7;0;SUP;Kangaroo
86;ZEZE;12;8;18;3,8;2;0;SUB;
50;MAJO;11;33;121;4,0;9;0;SUP;Whales
30;PLESOUN;11;23;71;3,6;7;1;SUP;Flamingo
51;HOLUB;11;36;50;1,7;9;0;TOP;Parrots
87;FYLOUS;10;21;27;1,8;4;1;SUB;
91;RESTRICTED2;9;9;10;2,1;1;0;SUB;
90;GUMA;8;6;13;3,5;1;0;SUB;
81;JIRKOS;8;6;4;2,0;2;0;SUB;
45;MUFFI;7;49;183;3,9;14;2;SUP;Pandas
70;NATYNA;7;49;90;2,0;9;0;SUP;Cheetahs
25;KIPEK;6;36;84;2,5;9;0;SUP;Wolves
20;HANI;5;20;110;5,8;7;2;SUP;Tigers
80;MIA;5;46;55;1,3;7;0;SUP;Sharks
85;LOSTY;4;1;14;18,0;1;0;SUB;
65;MONIKAS;4;50;148;3,0;10;0;SUP;Capybara
35;DEAGLES;3;23;115;5,1;6;0;SUP;Bears
92;LEXA;3;3;11;4,7;1;1;SUB;
84;CHALEC;3;11;25;2,5;2;0;SUB;
83;VITAN;2;1;3;5,0;1;0;SUB;
55;MAKIMA;2;20;84;4,3;9;0;SUP;Parrots
94;LAMA;2;2;6;4,0;1;0;SUB;
82;VENDY;2;6;17;3,2;2;0;SUB;
89;MANGO;2;7;9;1,6;1;0;SUB;
88;8PEK;0;13;10;0,8;3;0;SUB;
`.trim(); // ← zkrácená data (přidej všechna pokud chceš)

    let players = [];

    document.addEventListener('DOMContentLoaded', () => {
      parseCSV(csvData);
      document.getElementById('sortSelect').addEventListener('change', () =>
        renderGrid(document.getElementById('sortSelect').value)
      );
      renderGrid('KDA');
    });

  function parseCSV(data) {
    const lines = data.trim().split('\n');
    const headers = lines[0].split(';').slice(1);
    players = lines.slice(1).map(line => {
      const cells = line.split(';').slice(1);
      const obj = {};
      headers.forEach((h, i) => {
        obj[h.trim()] = cells[i]; // DŮLEŽITÉ: ořízne případné mezery
      });
      return obj;
    }).filter(p => p['Tým']);
    console.log(players); // ← sem přidej výpis do konzole
    console.log("Lines:", lines);
    console.log("Headers:", headers);
  }


    function renderGrid(sortBy) {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";

      const roleOrder = { TOP: 1, JNG: 2, MID: 3, ADC: 4, SUP: 5, SUB: 6 };
      
      players.sort((a, b) => {
        if (sortBy === "Tým") {
          return (a["Tým"] || "").localeCompare(b["Tým"] || "");
        } else if (sortBy === "Role") {
          return (roleOrder[a["Role"]] || 99) - (roleOrder[b["Role"]] || 99);
        } else {
          const num = val => parseFloat((val || '0').replace(',', '.')) || 0;
          return num(b[sortBy]) - num(a[sortBy]);
        }
      });

      for (const p of players) {
        const logoPath = `images/${p["Tým"]}.png`;
        const card = document.createElement("div");
        card.className = "player-card";
		card.innerHTML = `
		  <img src="${logoPath}" alt="${p["Tým"]}" class="team-logo" onerror="this.src='https://via.placeholder.com/48?text=No+Logo'">
		  <div class="player-info">Role: ${p["Role"]}</div>
		  <div class="player-name">${p["Player"]}</div>
		  <div class="player-info highlight">KDA: ${p["KDA"]}</div>
		  <div class="player-info">MVP: ${p["MVP"]}</div>
		  <div class="player-info">Kills: ${p["Kills"]}</div>
		`;
        grid.appendChild(card);
      }
    }
  </script>
</body>
</html>
